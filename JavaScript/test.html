<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Puzzle X</title>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="binary-heap.js"></script>
    <script src="heuristic.js"></script>
    <script src="puzzle-classes.js"></script>
    <script src="search-algorithms.js"></script>
    <script src="level-generator.js"></script>
</head>
<body>

</body>
</html>

<script>

    /**
     * Document ready function
     */
    $(document).ready(function(){

        // TODO:: take out this motherfucker iteration
        for (var i = 0; i < 1; i++) {

            // Variables
            var level;
            var problem;
            var canStop = false;

            // Dictionary that's gonna hold the four solutions given for the four heuristics
            var solutions = {
                euclidean: [],
                euclideanMatches: [],
                manhattan: [],
                manhattanMatches: []
            };

            // Level generator object
            var generator = new LevelGenerator('expert');

            // Repeat until at least one of heuristics returns a solution
            do {

                // Generate a random level
                level = generator.getGeneratedLevel(true);

                // Get start and goal puzzles
                start = level[0];
                goal = level[1];

                // Euclidean distances heuristic
                console.time('A* Search using distancesHeuristic with euclidean');
                problem = new SearchProblem(start, goal, SearchAlgorithms.AStarSearch, Heuristic.euclideanDistancesHeuristic);
                problem.showResult();
                solutions.euclidean = problem.getSolution();
                console.timeEnd('A* Search using distancesHeuristic with euclidean');

                if (solutions.euclidean.length > 0) {
                    canStop = true;
                }

                // Euclidean distances heuristic plus matches
                console.time('A* Search using distancesHeuristic with euclidean M');
                problem = new SearchProblem(start, goal, SearchAlgorithms.AStarSearch, Heuristic.euclideanDistancesHeuristicWithMatches);
                problem.showResult();
                solutions.euclideanMatches = problem.getSolution();
                console.timeEnd('A* Search using distancesHeuristic with euclidean M');

                if (solutions.euclideanMatches.length > 0) {
                    canStop = true;
                }

                // Manhattan distances heuristic
                console.time('A* Search using distancesHeuristic with manhattan');
                problem = new SearchProblem(start, goal, SearchAlgorithms.AStarSearch, Heuristic.manhattanDistancesHeuristic);
                problem.showResult();
                solutions.manhattan = problem.getSolution();
                console.timeEnd('A* Search using distancesHeuristic with manhattan');

                if (solutions.manhattan.length > 0) {
                    canStop = true;
                }

                // Manhattan distances heuristic plus matches
                console.time('A* Search using distancesHeuristic with manhattan M');
                problem = new SearchProblem(start, goal, SearchAlgorithms.AStarSearch, Heuristic.manhattanDistancesHeuristicWithMatches);
                problem.showResult();
                solutions.manhattanMatches = problem.getSolution();
                console.timeEnd('A* Search using distancesHeuristic with manhattan M');

                if (solutions.manhattanMatches.length > 0) {
                    canStop = true;
                }


            } while(!canStop);
        }

        console.log("");
        console.log("Best Solution");
        console.log(generator.getBestSolution(solutions));

    });
</script>